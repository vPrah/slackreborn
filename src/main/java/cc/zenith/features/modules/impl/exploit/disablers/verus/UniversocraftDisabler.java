package cc.slack.features.modules.impl.exploit.disablers.verus;

import cc.slack.events.impl.network.PacketEvent;
import cc.slack.features.modules.impl.exploit.disablers.IDisabler;
import cc.slack.utils.client.mc;
import cc.slack.utils.network.PacketUtil;
import net.minecraft.network.play.client.C00PacketKeepAlive;
import net.minecraft.network.play.client.C0FPacketConfirmTransaction;

public class UniversocraftDisabler implements IDisabler {

    @Override
    public void onPacket(PacketEvent event) {
        if (event.getPacket() instanceof C0FPacketConfirmTransaction) {
            if (mc.getPlayer().ticksExisted % 2075 < 120) {
                PacketUtil.sendNoEvent(new C00PacketKeepAlive(Integer.MIN_VALUE));
                ((C0FPacketConfirmTransaction) event.getPacket()).uid = Short.MAX_VALUE;
            }
        }
    }

    @Override
    public String toString() {
        return "Universocraft";
    }
}
