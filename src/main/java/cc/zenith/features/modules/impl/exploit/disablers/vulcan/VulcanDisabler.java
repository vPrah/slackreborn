package cc.zenith.features.modules.impl.exploit.disablers.vulcan;

import cc.zenith.events.impl.network.PacketEvent;
import cc.zenith.events.impl.player.UpdateEvent;
import cc.zenith.features.modules.impl.exploit.disablers.IDisabler;
import cc.zenith.utils.client.mc;
import cc.zenith.utils.network.PacketUtil;
import net.minecraft.network.play.client.C07PacketPlayerDigging;
import net.minecraft.network.play.client.C17PacketCustomPayload;
import net.minecraft.util.BlockPos;
import net.minecraft.util.EnumFacing;

public class VulcanDisabler implements IDisabler {

    @Override
    public void onUpdate(UpdateEvent event) {
        if (mc.getPlayer().ticksExisted % 5 == 0) {
            PacketUtil.send(new C07PacketPlayerDigging(C07PacketPlayerDigging.Action.STOP_DESTROY_BLOCK, new BlockPos(mc.getPlayer()), EnumFacing.UP));
        }
    }

    @Override
    public void onPacket(PacketEvent e) {
        if (e.getPacket() instanceof C17PacketCustomPayload) {
            e.cancel();
        }
    }

    public String toString() {
        return "Vulcan";
    }
}
