// Slack Client (discord.gg/slackclient)

package cc.slack.features.modules.impl.exploit;

import cc.slack.Slack;
import cc.slack.events.impl.network.PacketEvent;
import cc.slack.features.modules.api.Category;
import cc.slack.features.modules.api.Module;
import cc.slack.features.modules.api.ModuleInfo;
import cc.slack.utils.network.PacketUtil;
import cc.slack.utils.other.PrintUtil;
import io.github.nevalackin.radbus.Listen;
import net.minecraft.network.play.server.S37PacketStatistics;
import net.minecraft.network.play.server.S40PacketDisconnect;

@ModuleInfo(
        name = "RageQuit",
        category = Category.EXPLOIT
)
public class RageQuit extends Module {

    public RageQuit() {
        super();
    }

    @Override
    public void onEnable() {
        if (mc.isIntegratedServerRunning()) {
            PrintUtil.message("You can't enable §c§l'Kick' §fin SinglePlayer.");
            return;
        }
        PacketUtil.send(new S40PacketDisconnect());
    }

    @Listen
    public void onPacket(PacketEvent event) {
        if (event.getPacket() instanceof S37PacketStatistics) {
            Slack.getInstance().getModuleManager().getInstance(RageQuit.class).setToggle(false);
        }
    }

}
