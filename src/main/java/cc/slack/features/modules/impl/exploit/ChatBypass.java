package cc.slack.features.modules.impl.exploit;

import cc.slack.events.impl.network.PacketEvent;
import cc.slack.features.modules.api.Category;
import cc.slack.features.modules.api.Module;
import cc.slack.features.modules.api.ModuleInfo;
import cc.slack.features.modules.api.settings.impl.ModeValue;
import io.github.nevalackin.radbus.Listen;
import net.minecraft.network.play.client.C01PacketChatMessage;

import java.util.Arrays;
import java.util.stream.Collectors;

@ModuleInfo(
        name = "ChatBypass",
        category = Category.EXPLOIT
)
public class ChatBypass extends Module {

    private final ModeValue<String> bypassmode = new ModeValue<>("Bypass", new String[]{"Universocraft", "Basic"});
    // Display
    private final ModeValue<String> displayMode = new ModeValue<>("Display", new String[]{"Simple", "Off"});

    public ChatBypass() {
        addSettings(bypassmode, displayMode);
    }

    @Listen
    public void onPacket (PacketEvent event) {
        switch (bypassmode.getValue()) {
            case "Universocraft":
                if (event.getPacket() instanceof C01PacketChatMessage) {
                    C01PacketChatMessage c01 = event.getPacket();
                    String message = c01.getMessage();
                    if (!Arrays.stream(new String[]{"/", "!"}).anyMatch(message::startsWith)) {
                        String m = Arrays.stream(message.split(" ")).map(word -> "y" + word).collect(Collectors.joining(" "));
                        (c01).setMessage(m);
                        event.setPacket(c01);
                    }
                }
                break;
            case "Basic":
                if (event.getPacket() instanceof C01PacketChatMessage) {
                    C01PacketChatMessage c01 = event.getPacket();
                    String m = c01.getMessage().toLowerCase();
                    m = m.replace("fuck", "fluck");
                    m = m.replace("fuk", "fluck");
                    m = m.replace("fk", "fluck");
                    m = m.replace("shit", "sh1t");
                    m = m.replace("bitch", "bt1ch");


                    m = m.replace("ass", "a$s");
                    m = m.replace("kys", "keep your self safe");
                    m = m.replace("nigger", "niqq3r");
                    m = m.replace("nigga", "niqqa");

                    (c01).setMessage(m);
                    event.setPacket(c01);
                }
                break;
        }
    }


    @Override
    public String getMode() {
        switch (displayMode.getValue()) {
            case "Simple":
                return bypassmode.getValue();
        }
        return null;
    }

}
